# Accounts アプリケーション

## 概要

このアプリケーションは、ユーザー認証とプロフィール管理という、本プロジェクトにおける最も中心的な機能を担います。Django標準のユーザー認証システムを基盤としつつ、アプリ独自の詳細なプロフィール情報を管理するための`UserProfile`モデルを提供します。

ユーザーの基本的な情報（誕生日、性別）から、アプリの目標設定（目標体重、目標歩数）、さらには性格診断の結果（Big Five）やオンボーディングの進捗状況まで、ユーザーに紐づく全ての静的な情報を一元管理します。

## 主な機能

### 1. ユーザー認証

* **関連API:** `/api/token/`
* **役割:** Django REST FrameworkとSimple JWTライブラリを利用し、ユーザー名とパスワードに基づいたトークン認証機能を提供します。APIへのリクエストは、ここで発行されたJWT（JSON Web Token）をヘッダーに含めることで認証されます。

### 2. プロフィール管理

* **APIエンドポイント:** `/api/accounts/profile/`
* **役割:** ログイン中のユーザーに紐づく`UserProfile`の情報を取得、または部分的に更新します。ユーザーの目標設定や身体情報の変更は、このAPIを通じて行われます。

### 3. オンボーディング状況確認

* **APIエンドポイント:** `/api/accounts/onboarding-status/`
* **役割:** ユーザーが初期設定や各種アンケートを完了したかどうかを判定し、フロントエンドに伝えます。これにより、「このユーザーには、次にこの画面を見せるべき」といった、動的なフロー制御が可能になります。

## データベースモデル

このアプリケーションでは、Djangoの標準ユーザー認証システムと、アプリ独自のプロフィール情報を組み合わせる「**プロフィール拡張モデル**」という一般的な設計パターンを採用しています。

### `User` (Django標準モデル)

* **役割:** Djangoに組み込まれている、基本的なユーザー認証情報を管理するモデルです。
* **主なフィールド:**
    * `username`: ユーザーのログインID。
    * `password`: ハッシュ化されたパスワード。
    * `email`: メールアドレス。

### `UserProfile` (独自拡張モデル)

* **役割:** Django標準の`User`モデルを拡張し、このアプリ固有のユーザー情報を格納します。`User`モデルとは**1対1の関係**で紐付きます。
* **主なフィールド:**
    | フィールド名 | 型 | 説明 |
    | :--- | :--- | :--- |
    | `user` | `OneToOneField` | `User`モデルへの関連付け。 |
    | `date_of_birth`, `gender`, `height_cm` | `DateField`など | ユーザーの基本的な身体情報。 |
    | `target_weight`, `target_steps_per_day` | `FloatField`など | ユーザーが設定した各種目標値。 |
    | `big5_openness`, `big5_conscientiousness`など | `IntegerField` | TIPI-Jに基づいた性格診断スコア。 |
    | `onboarding_complete` | `BooleanField` | 初期設定が完了したかを示すフラグ。 |
    | `fitness_score` | `FloatField` | 日々の活動から計算される体力スコア。 |

 



---



## 補足: データベースの型（フィールドタイプ）について



| 型 | 例えるなら... | 役割 |
| :--- | :--- | :--- |
| **`CharField`** | 一行のテキストボックス  | **文字数制限のある**一行のテキストを保存します。 |
| **`TextField`** | 大きなメモ帳  | 、**文字数制限がない**長い文章を保存します。 |
| **`IntegerField`** | 個数を数えるカウンター| 歩数やカロリーなど、**小数点のない**きっちりした数字（整数）を保存します。 |
| **`FloatField`** | 精密な体重計  | 体重 (65.5 kg) や栄養素など、**小数点を含む**数字を保存します。 |
| **`BooleanField`** | ON / OFFのスイッチ  | 「はい / いいえ」「True / False」の**2つの状態だけ**を記録します。 |
| **`DateField`** | カレンダー | 「2025-07-16」といった**日付**だけを保存します。 |
| **`DateTimeField`** | カレンダーと時計  | 「2025-07-16 15:30:00」といった、**日付と時刻**の両方を保存します。 |
| **`ForeignKey`** | 名札 | あるデータが、「**誰の（どの）ものか**」を示すための、最も一般的な接着剤です。（多対1の関係） |
| **`OneToOneField`** | 指定席のチケット  | **「1対1」の関係しか許さない**、より厳しい接着剤です。（例: 1人のユーザーは、1つのプロフィールしか持てない） |
| **`ManyToManyField`**| タグ付け機能  | **「多対多」**の複雑な関係を表現します。（例: 1人のユーザーが複数のアイテムをアンロックできる） |




