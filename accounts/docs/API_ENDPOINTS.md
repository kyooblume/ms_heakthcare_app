お疲れ様です。承知いたしました。
これまで私と一緒に作り上げてきたバックエンドの機能について、他の開発者の方がスムーズに引き継ぎできるよう、仕様をまとめたドキュメントを作成します。

このドキュメントは、以下の3部構成になっています。

バックエンドシステム概要: プロジェクトの全体像と各機能の使い方を説明します。

データベース設計: 各データの構造と、それらの関連性を解説します。

データベース概要図 (ERD): データベース全体の構造を視覚的に理解するための図です。

プロジェクト引継ぎ書：ms_healthcare_app_backend
1. バックエンドシステム概要
1.1. プロジェクトの目的

本プロジェクトは、日々の健康活動（歩数、食事、睡眠など）を記録し、ユーザーのモチベーションを維持・向上させるためのゲーミフィケーション要素を取り入れた、総合ヘルスケアアプリケーションのバックエンドシステムです。

1.2. 使用技術スタック

フレームワーク: Django

API: Django REST Framework

認証: Djoser, Simple JWT (JSON Web Token)

データベース: SQLite (開発用)

外部API連携: Open Food Facts (バーコードによる商品情報取得)

1.3. プロジェクト構造（アプリケーション概要）

本プロジェクトは、機能ごとに以下のDjangoアプリケーションに分割されています。

アプリケーション名

主な役割

accounts

ユーザー認証（登録・ログイン）と、ユーザーの静的なプロフィール情報（誕生日、目標、性格診断結果など）を管理します。

health_records

歩数や体重といった、時系列で記録される健康データを管理します。

meals

食事内容（朝食・昼食・夕食・間食）と、それに含まれる品目および栄養素を管理します。

products

外部APIから取得した商品情報をキャッシュ（一時保存）します。バーコード検索機能の核となります。

reports

記録されたデータを分析し、ランキングなどのレポートを生成します。

customization

ユーザーのアバターとなるキャラクターの見た目（体型、装備アイテム）を管理します。

chat

(初期に作成) ユーザー間のチャット機能の基盤。


Google スプレッドシートにエクスポート
1.4. 主要機能とAPIエンドポイント

機能

概要

主要APIエンドポイント

ユーザー認証

ユーザー名とパスワードで認証し、APIアクセス用のトークンを発行します。

POST /api/token/

プロフィール管理

ユーザーの目標体重やBigFiveの性格診断結果などを取得・更新します。

GET, PATCH /api/accounts/profile/

オンボーディング

ユーザーがどのアンケートに回答済みかを判断し、次に表示すべき画面をフロントエンドに伝えます。

GET /api/accounts/onboarding-status/

歩数ランキング

指定された日付の歩数ランキングと、自分の順位や統計情報を取得します。

GET /api/reports/steps-ranking/<YYYY-MM-DD>/

睡眠リズムランキング

社会的ジェットラグ（体内時計のズレ）が少ない順のランキングを取得します。

GET /api/reports/sleep-rhythm-ranking/

バーコード検索

商品のバーコード（JANコード）から、Open Food Facts APIを利用して栄養情報を取得します。

GET /api/products/lookup/<barcode>/

バーコード食事記録

バーコード検索で得た商品情報を、食べた量と共に食事記録として保存します。

POST /api/meals/add-from-barcode/

キャラクター情報

ユーザーの現在の体型や装備しているアイテムの情報を取得・変更します。

(例: GET, PATCH /api/customization/character/)



