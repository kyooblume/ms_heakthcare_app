# Products アプリケーション

## 概要

このアプリケーションは、商品のバーコード（JANコード）を元に、外部の公開データベースから商品名や栄養情報を取得し、その結果をアプリ独自のデータベースにキャッシュ（一時保存）する機能を提供します。

ユーザーが食事を手入力する手間を大幅に削減し、簡単かつ正確な食事記録体験を実現するための、バックエンドの中核機能の一つです。

## 主な機能

### 1. バーコードによる商品情報検索

* **APIエンドポイント:** `/api/products/lookup/<barcode>/`
* **目的:** スマートフォンのカメラでスキャンされた商品のバーコード番号をもとに、その商品の詳細情報（特に栄養素）をユーザーに提供します。
* **仕組み:**
    1.  まず、リクエストされたバーコード番号が、自分たちのデータベース（`ProductNutrition`モデル）に既に保存されていないか探します。
    2.  もしデータがあれば、外部に問い合わせることなく、保存された情報を即座に返します（**キャッシュヒット**）。
    3.  もしデータがなければ、**Open Food Facts API** (`https://world.openfoodfacts.org/`) に問い合わせを行います。
    4.  APIから返ってきた商品名、カロリー、タンパク質、脂質、炭水化物などの情報を、今後のために自分たちのデータベースに新しく保存（キャッシュ）します。
    5.  取得・保存した情報を、フロントエンドに返します。

## データベースモデル

### `ProductNutrition`

* **役割:** 一度外部APIから取得した商品情報を保存しておくための、キャッシュ用テーブルです。
* **主なフィールド:**
    * `barcode` (主キー): 商品のJANコード。
    * `product_name`: 商品名。
    * `calories`: 100gあたりのカロリー。
    * `protein`: 100gあたりのタンパク質。
    * `fat`: 100gあたりの脂質。
    * `carbohydrates`: 100gあたりの炭水化物。
    * `image_url`: 商品の画像URL。
