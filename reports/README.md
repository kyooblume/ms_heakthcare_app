# Reports アプリケーション

## 概要

このアプリケーションは、ユーザーが記録した様々な健康データを分析し、ランキングやレポートなどの有益なフィードバックを生成する機能を提供します。ユーザーのモチベーション維持・向上を目的とした、ゲーミフィケーションの中核を担います。



## 主なAPI機能

### 1. 歩数ランキング

* **APIエンドポイント:** `/api/reports/steps-ranking/<YYYY-MM-DD>/`
* **対応ビュー:** `StepRankingReportView`
* **目的:** 日々の歩数を他のユーザーと比較することで、継続的なウォーキングへの意欲を高めます。
* **仕組み:** 指定された日付の`HealthRecord`から全ユーザーの歩数データを集計し、ランキングを生成します。ユーザー自身の順位、上位パーセント、参加者総数などの統計情報も合わせて返します。

### 2. 睡眠リズムランキング

* **APIエンドポイント:** `/api/reports/sleep-rhythm-ranking/`
* **対応ビュー:** `SocialJetlagReportView`
* **目的:** 「社会的ジェットラグ」という指標を用いて、睡眠の「量」ではなく「質（規則正しさ）」を評価し、健康的な生活リズムへの意識を高めます。
* **仕組み:** `SleepChronotypeSurvey`のデータから、平日と休日の睡眠リズムの「ズレ」を計算し、そのズレが少ない順にランキングを生成します。

### 3. 活動量レポート（ダッシュボード用）

* **APIエンドポイント:** `/api/reports/activity/daily/<YYYY-MM-DD>/`
* **対応ビュー:** `DailyActivityReportView`
* **目的:** 運動状況を可視化するためのデータを提供します。
* **仕組み:** 指定された日の「目標歩数」と「実績歩数」を取得し、目標に対する「達成率」を計算して返します。フロントエンドは、このデータを元に円グラフなどを描画します。

### 4. 週間睡眠レポート（ダッシュボード用）

* **APIエンドポイント:** `/api/reports/sleep/weekly/`
* **対応ビュー:** `WeeklySleepReportView`
* **目的:** 睡眠パターンの推移を可視化するためのデータを提供します。
* **仕組み:** 過去7日間の`HealthRecord`から日々の睡眠時間（`record_type='sleep'`）を取得し、日付と睡眠時間のペアのリストとして返します。フロントエンドは、このデータを元に棒グラフなどを作成します。


## 概要

このアプリケーションは、ユーザーが記録した様々な健康データを分析し、ランキングなどの有益なレポートを生成する機能を提供します。ユーザーのモチベーション維持・向上を目的とした、ゲーミフィケーションの中核を担います。
