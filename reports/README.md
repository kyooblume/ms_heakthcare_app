# Reports アプリケーション

## 概要

このアプリケーションは、ユーザーが記録した様々な健康データを分析し、ランキングなどの有益なレポートを生成する機能を提供します。ユーザーのモチベーション維持・向上を目的とした、ゲーミフィケーションの中核を担います。

## 主な機能

### 1. 歩数ランキング

* **APIエンドポイント:** `/api/reports/steps-ranking/<YYYY-MM-DD>/`
* **目的:** 日々の歩数を他のユーザーと比較することで、継続的なウォーキングへの意欲を高めます。
* **仕組み:**
    1.  指定された日付の`HealthRecord`から、全ユーザーの歩数データを集計します。
    2.  歩数が多い順にユーザーを並べ替え、ランキングを生成します。
    3.  APIを呼び出したユーザー自身の順位、上位パーセント、参加者総数などの統計情報も合わせて返します。

### 2. 睡眠リズムランキング

* **APIエンドポイント:** `/api/reports/sleep-rhythm-ranking/`
* **目的:** 「社会的ジェットラグ」という指標を用いて、睡眠の「量」ではなく「質（規則正しさ）」を評価し、健康的な生活リズムへの意識を高めます。
* **仕組み:**
    1.  `SleepChronotypeSurvey`に記録された、ユーザーごとの「平日の睡眠中央時刻」と「休日の睡眠中央時刻」を取得します。
    2.  2つの時刻の差分を「社会的ジェットラグ」として計算します。
    3.  この**ズレが少ない順**にユーザーを並べ替え、ランキングを生成します。

## データベースモデル

* このアプリは、主に`health_records`アプリの`HealthRecord`モデルと`SleepChronotypeSurvey`モデルのデータを参照して動作します。
* このアプリ自体が持つ独自のデータベースモデルはありません。
