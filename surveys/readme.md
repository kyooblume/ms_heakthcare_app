# Django アンケートアプリケーション (`surveys`)

## 概要

`surveys`は、DjangoおよびDjango Rest Frameworkを使用して構築された、柔軟なアンケート機能を提供するアプリケーションです。
このアプリケーションを使用すると、管理者は複数の質問と選択肢から成るアンケートを作成でき、認証済みユーザーはAPIを通じてアンケートに回答することができます。

## 主な機能

* **動的なアンケート作成**:
    * アンケート (`Survey`) は、タイトルと説明を持つことができます。
    * 各アンケートには、複数の質問 (`Question`) を紐付けることができます。
    * 質問には、「自由記述形式」と「単一選択形式」の2種類があります。
* **APIを通じた操作**:
    * **アンケートの取得**: 認証済みのユーザーは、利用可能なアンケートの一覧と詳細（含まれる質問と選択肢）をAPI経由で取得できます。アンケートの作成や編集はAPI経由では行えず、Djangoの管理画面から行います。
    * **回答の投稿と閲覧**: 認証済みのユーザーは、質問に対して回答を投稿できます。ユーザーは自分自身の回答のみを閲覧・編集・削除することが可能です。
* **管理者向けの便利な機能**:
    * Djangoの管理画面でアンケート、質問、選択肢、回答を簡単に管理できます。
    * アンケートの編集画面で、質問をインラインで追加・編集できます。
    * 質問の編集画面で、選択肢をインラインで追加・編集できます。

## モデル構成

このアプリケーションは、4つの主要なモデルで構成されています。

1.  **Survey**: アンケート全体（例：「アプリ満足度調査」）を定義します。
2.  **Question**: アンケートに含まれる個々の質問を定義します。「自由記述」または「単一選択」のタイプを持ちます。
3.  **Choice**: 選択式の質問に紐づく選択肢を定義します。
4.  **Answer**: ユーザーからの回答を保存します。どのユーザーがどの質問に回答したかを記録します。

## APIエンドポイント

APIの利用には、ユーザー認証が必要です。

| エンドポイント | HTTPメソッド | 説明 |
| --- | --- | --- |
| `/surveys/` | `GET` | 全てのアンケートの一覧を取得します。 |
| `/surveys/<id>/` | `GET` | 指定したIDのアンケート詳細（質問と選択肢を含む）を取得します。 |
| `/answers/` | `GET` | 現在ログインしているユーザー自身の回答一覧を取得します。 |
| `/answers/` | `POST` | 新しい回答を作成します。回答者にはログイン中のユーザーが自動で設定されます。 |
| `/answers/<id>/` | `GET`, `PUT`, `PATCH`, `DELETE` | 指定したIDの回答を閲覧、更新、削除します（自身の回答のみ）。 |

**リクエスト例（回答の作成）**

`POST /answers/`

```json
{
    "question": 1,
    "text_answer": "これは自由記述の回答です。",
    "choice_answer": null
}
